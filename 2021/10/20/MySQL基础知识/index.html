
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MySQL基础知识 - Jianz Seraphine</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="一.MySQL数据类型常用类型1.最常用的一些类型：整数：int 
浮点数：double 
日期：date、 datetime、 timestamp 
字符串：varchar (省空间) 、 cha,"> 
    <meta name="author" content="Seraphine丶"> 
    <link rel="alternative" href="atom.xml" title="Jianz Seraphine" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
    
<link rel="stylesheet" href="/css/diaspora.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">Jianz Seraphine</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://example.com"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">MySQL基础知识</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">MySQL基础知识</h1>
        <div class="stuff">
            <span>十月 20, 2021</span>
            

        </div>
        <div class="content markdown">
            <h2 id="一-MySQL数据类型常用类型"><a href="#一-MySQL数据类型常用类型" class="headerlink" title="一.MySQL数据类型常用类型"></a>一.MySQL数据类型常用类型</h2><h4 id="1-最常用的一些类型："><a href="#1-最常用的一些类型：" class="headerlink" title="1.最常用的一些类型："></a>1.最常用的一些类型：</h4><pre><code>整数：int 
浮点数：double 
日期：date、 datetime、 timestamp 
字符串：varchar (省空间) 、 char（效率高）   
大数据：blob 、 text 
</code></pre>
<h4 id="2-其他一些类型"><a href="#2-其他一些类型" class="headerlink" title="2.其他一些类型:"></a>2.其他一些类型:</h4><pre><code>        整数类型：    
        tinyInt                    很小的整数
        smallint            小的整数
        mediumint            中等大小的整数
       *int(integer)        普通大小的整数
        bigint               大整数
        
        小数类型：
        float（m,d）          单精度浮点数
       *double（m,d）         双精度浮点数
        decimal（m,d）        压缩严格的定点数（小数的精确运算）浪费空间
        
        日期类型：    
        year                    YYYY 1901~2155
        time                    HH:MM:SS -838:59:59~838:59:59
       *date                     YYYY-MM-DD 1000-01-01~9999-12-3
       *datetime                 YYYY-MM-DD HH:MM:SS 1000-01-01 00:00:00~ 9999-12-31 23:59:59
       *timestamp                  YYYY-MM-DD HH:MM:SS 19700101 00:00:01 UTC~2038-01-19 03:14:07UTC
        
        文本、二进制类型：
       *CHAR(M)(定长字符串)           M为0~255之间的整数
       *VARCHAR(M)（变长字符串）       M为0~65535之间的整数
        TINYBLOB                    允许长度0~255字节
       *BLOB                            允许长度0~65535字节
        MEDIUMBLOB                      允许长度0~167772150字节
        LONGBLOB                    允许长度0~4294967295字节
        TINYTEXT                    允许长度0~255字节
       *TEXT                            允许长度0~65535字节
        MEDIUMTEXT                  允许长度0~167772150字节
        LONGTEXT                    允许长度0~4294967295字节
        VARBINARY(M)                允许长度0~M个字节的变长字节字符串
        BINARY(M)                   允许长度0~M个字节的定长字节字符串
</code></pre>
<h2 id="二-数据处理之查询"><a href="#二-数据处理之查询" class="headerlink" title="二.数据处理之查询"></a>二.数据处理之查询</h2><h4 id="1-基本-SELECT-语句"><a href="#1-基本-SELECT-语句" class="headerlink" title="1.基本 SELECT 语句"></a>1.基本 SELECT 语句</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT *|&#123;[DISTINCT] column|expression [alias],...&#125;</span><br><span class="line">FROM table;</span><br></pre></td></tr></table></figure>
<p>• SELECT 标识选择哪些列。<br>• FROM 标识从哪个表中选择。</p>
<h4 id="2-选择全部列"><a href="#2-选择全部列" class="headerlink" title="2.选择全部列"></a>2.选择全部列</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM departments;</span><br></pre></td></tr></table></figure>
<h4 id="3-选择特定的列"><a href="#3-选择特定的列" class="headerlink" title="3.选择特定的列"></a>3.选择特定的列</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT department_id, location_id</span><br><span class="line">FROM departments;</span><br></pre></td></tr></table></figure>

<pre><code>注 意:

 SQL 语言大小写不敏感。
 SQL 可以写在一行或者多行 
 关键字不能被缩写也不能分行
 各子句一般要分行写。
 使用缩进提高语句的可读性。
</code></pre>
<h4 id="4-列的别名"><a href="#4-列的别名" class="headerlink" title="4.列的别名"></a>4.列的别名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用‘AS’或者‘ ’来表示别名</span><br><span class="line">SELECT last_name AS name, commission_pct comm</span><br><span class="line">FROM employees;</span><br><span class="line">SELECT last_name &quot;Name&quot;, salary*12 &quot;Annual Salary&quot;</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>
<h4 id="5-字符串"><a href="#5-字符串" class="headerlink" title="5.字符串"></a>5.字符串</h4><pre><code>• 字符串可以是 SELECT 列表中的一个字符,数字,日期。
• 日期和字符只能在单引号中出现。
• 每当返回一行时，字符串被输出一次。
</code></pre>
<h2 id="三：过滤"><a href="#三：过滤" class="headerlink" title="三：过滤"></a>三：过滤</h2><h4 id="1-使用WHERE-子句（将不满足条件的行过滤掉）"><a href="#1-使用WHERE-子句（将不满足条件的行过滤掉）" class="headerlink" title="1.使用WHERE 子句（将不满足条件的行过滤掉）"></a>1.使用WHERE 子句（将不满足条件的行过滤掉）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通式：</span><br><span class="line">SELECT *|&#123;[DISTINCT] column|expression [alias],...&#125;</span><br><span class="line">FROM table</span><br><span class="line">[WHERE condition(s)];</span><br></pre></td></tr></table></figure>
<h4 id="2-比较运算"><a href="#2-比较运算" class="headerlink" title="2.比较运算"></a>2.比较运算</h4><pre><code>        操作符                         含义
          =                        等于 (不是 ==) 
          &gt;                           大于
          &gt;=                        大于、等于
          &lt;                           小于
          &lt;=                        小于、等于
          &lt;&gt;                     不等于 (也可以是 !=)
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name, salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &lt;= 3000;</span><br></pre></td></tr></table></figure>
<h4 id="3-其他比较运算"><a href="#3-其他比较运算" class="headerlink" title="3.其他比较运算"></a>3.其他比较运算</h4><pre><code>    操作数                               含义
  BETWEEN...AND                   在两个值之间 (包含边界)
    IN(set)                        等于值列表中的一个
    LIKE                              模糊查询
   IS NULL                              空值
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">IN:</span><br><span class="line">SELECT employee_id, last_name, salary, manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id IN (100, 101, 201);</span><br><span class="line"></span><br><span class="line">•使用 LIKE 运算选择类似的值</span><br><span class="line">• 选择条件可以包含字符或数字:</span><br><span class="line">– % 代表零个或多个字符(任意个字符)。</span><br><span class="line">– _ 代表一个字符。</span><br><span class="line">LIKE：</span><br><span class="line">SELECT first_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE first_name LIKE &#x27;_o%&#x27;;</span><br><span class="line"></span><br><span class="line">使用 IS (NOT) NULL 判断空值。</span><br></pre></td></tr></table></figure>
<h4 id="4-逻辑运算"><a href="#4-逻辑运算" class="headerlink" title="4.逻辑运算"></a>4.逻辑运算</h4><pre><code>    操作符                 含义
    AND                  逻辑并
    OR                   逻辑或
    NOT                  逻辑否
</code></pre>
<h4 id="5-ORDER-BY子句"><a href="#5-ORDER-BY子句" class="headerlink" title="5.ORDER BY子句"></a>5.ORDER BY子句</h4><pre><code>    使用 ORDER BY 子句排序
    – ASC（ascend）: 升序
    – DESC（descend）: 降序
    • ORDER BY 子句在SELECT语句的结尾。
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">多个列排序:</span><br><span class="line">SELECT last_name, department_id, salary</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY department_id, salary DESC;</span><br></pre></td></tr></table></figure>
<h2 id="四：分组函数"><a href="#四：分组函数" class="headerlink" title="四：分组函数"></a>四：分组函数</h2><pre><code>   组函数类型：
    • AVG()
    • COUNT()
    • MAX()
    • MIN()
    • SUM()
</code></pre>
<h4 id="1-分组数据：GROUP-BY-子句语法"><a href="#1-分组数据：GROUP-BY-子句语法" class="headerlink" title="1.分组数据：GROUP BY 子句语法"></a>1.分组数据：GROUP BY 子句语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT department_id, AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id ;</span><br></pre></td></tr></table></figure>
<h4 id="2-非法使用组函数"><a href="#2-非法使用组函数" class="headerlink" title="2.非法使用组函数"></a>2.非法使用组函数</h4><pre><code>• 不能在 WHERE 子句中使用组函数。
• 可以在 HAVING 子句中使用组函数。
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">错误写法：</span><br><span class="line">SELECT department_id, AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE AVG(salary) &gt; 8000</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure>
<h4 id="3-过滤分组：-HAVING-子句"><a href="#3-过滤分组：-HAVING-子句" class="headerlink" title="3.过滤分组： HAVING 子句"></a>3.过滤分组： HAVING 子句</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT department_id, MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MAX(salary)&gt;10000;</span><br></pre></td></tr></table></figure>

<h2 id="五：JOIN-ON连接"><a href="#五：JOIN-ON连接" class="headerlink" title="五：JOIN ON连接"></a>五：JOIN ON连接</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#一）等值连接</span><br><span class="line">#案例1.查询员工名、部门名</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM departments d</span><br><span class="line">JOIN  employees e</span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br><span class="line"></span><br><span class="line">#二）非等值连接</span><br><span class="line"></span><br><span class="line">#查询员工的工资级别</span><br><span class="line"></span><br><span class="line">SELECT salary,grade_level</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN job_grades g</span><br><span class="line">ON e.`salary` BETWEEN g.`lowest_sal` AND g.`highest_sal`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#三）自连接</span><br><span class="line"></span><br><span class="line">#查询员工的名字、上级的名字</span><br><span class="line">SELECT e.employee_id,e.last_name,m.employee_id,m.last_name</span><br><span class="line">FROM employees e, employees m</span><br><span class="line">WHERE m.employee_id = e.manager_id;</span><br><span class="line"></span><br><span class="line">	#四）外连接</span><br><span class="line">	 #左外连接</span><br><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM departments d</span><br><span class="line">LEFT OUTER JOIN employees e</span><br><span class="line">ON d.`department_id` = e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br><span class="line">#右外连接</span><br><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM employees e</span><br><span class="line">RIGHT OUTER JOIN departments d</span><br><span class="line">ON d.`department_id` = e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br><span class="line"></span><br><span class="line">#交叉连接</span><br><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">CROSS JOIN boys bo;</span><br></pre></td></tr></table></figure>
<h2 id="六：常见函数"><a href="#六：常见函数" class="headerlink" title="六：常见函数"></a>六：常见函数</h2><pre><code>字符控制函数：
    CONCAT(&#39;Hello&#39;, &#39;World&#39;)
    SUBSTR(&#39;HelloWorld&#39;,1,5)
    LENGTH(&#39;HelloWorld&#39;)
    INSTR(&#39;HelloWorld&#39;, &#39;W&#39;)
    LPAD(salary,10,&#39;*&#39;)
    RPAD(salary, 10, &#39;*&#39;)
    TRIM(&#39;H&#39; FROM &#39;HelloWorld&#39;)
    REPLACE(&#39;abcd&#39;,&#39;b&#39;,&#39;m&#39;)

日期函数:
    now()

CASE 表达式:
    CASE expr WHEN comparison_expr1 THEN return_expr1
    [WHEN comparison_expr2 THEN return_expr2
    WHEN comparison_exprn THEN return_exprn
    ELSE else_expr]
    END
</code></pre>
<h2 id="七：数据处理之增删改"><a href="#七：数据处理之增删改" class="headerlink" title="七：数据处理之增删改"></a>七：数据处理之增删改</h2><pre><code>增：
INSERT INTO table [(column [, column...])]
VALUES (value [, value...]);
改：
UPDATE table
SET column = value [, column = value, ...]
[WHERE condition];
删：
DELETE FROM table
[WHERE condition];
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">    /* </span><br><span class="line">		对于hire_date这种为datetime类型的字段可以用now()函数来直接填写当前的时间</span><br><span class="line">    */</span><br><span class="line">-- INSERT:</span><br><span class="line"></span><br><span class="line"># 隐式方式：在列名表中省略该列的值</span><br><span class="line">INSERT INTO departments(department_name  )</span><br><span class="line">VALUES   	(&#x27;Pur&#x27;);</span><br><span class="line"></span><br><span class="line"># 显示方法：在VALUES子句中指定空值</span><br><span class="line">INSERT INTO departments(department_name,location_id,manager_id)</span><br><span class="line">VALUES  (&#x27;Fin&#x27;,NULL,NULL);</span><br><span class="line"></span><br><span class="line">#从其它表中拷贝数据</span><br><span class="line">-- 第一种</span><br><span class="line">INSERT INTO emp2 #emp2：新建的表，与employees表中的字段完全相同  </span><br><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id = 90;</span><br><span class="line">-- 第二种</span><br><span class="line">INSERT INTO sales_reps(id, name, salary, commission_pct)</span><br><span class="line">SELECT employee_id, last_name, salary, commission_pct</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id LIKE &#x27;%REP%&#x27;;</span><br><span class="line">#解释：从employees表中选中一些字段导入sales——reps表中.</span><br><span class="line"></span><br><span class="line">-- UPDATE</span><br><span class="line">/*</span><br><span class="line">此为修改主键的值，只能在WHERE中选中修改之前的时候主键的值，然后改为想修改成的值</span><br><span class="line">UPDATE departments</span><br><span class="line">SET department_id = 280</span><br><span class="line">WHERE department_id = 274;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">UPDATE employees</span><br><span class="line">SET department_id = 70</span><br><span class="line">WHERE employee_id = 113;</span><br><span class="line">#可以一次更新多条数据</span><br><span class="line"></span><br><span class="line">-- DELETE</span><br><span class="line">/*删除刚创建的元素</span><br><span class="line">DELETE FROM departments</span><br><span class="line">WHERE department_name = &#x27;Pur&#x27; AND department_id = 272; </span><br><span class="line">*/</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="八：子查询"><a href="#八：子查询" class="headerlink" title="八：子查询"></a>八：子查询</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&gt;(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name = &#x27;Abel&#x27;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SELECT 	last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id = (</span><br><span class="line">	SELECT job_id</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id = 141</span><br><span class="line">)AND salary &gt;(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id = 143</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">	SELECT last_name,job_id,salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE salary = (</span><br><span class="line">		SELECT MIN(salary)</span><br><span class="line">		FROM employees</span><br><span class="line">	);</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id = 1500;</span><br><span class="line"></span><br><span class="line">	SELECT DISTINCT department_id</span><br><span class="line">	FROM departments</span><br><span class="line">	WHERE location_id IN(1400,1700)</span><br><span class="line">ORDER BY department_id ASC;</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id &lt;&gt; ALL(</span><br><span class="line">	SELECT DISTINCT department_id</span><br><span class="line">	FROM departments</span><br><span class="line">	WHERE location_id IN(1400,1700)</span><br><span class="line">)</span><br><span class="line">ORDER BY department_id ASC;</span><br><span class="line"></span><br><span class="line">SELECT department_name,e.employee_id,d.department_id</span><br><span class="line">FROM departments d</span><br><span class="line">JOIN employees e</span><br><span class="line">ON e.department_id = d.department_id</span><br><span class="line">WHERE e.employee_id = 102</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">#FROM后面</span><br><span class="line"></span><br><span class="line">SELECT AVG(salary),department_name,e.department_id</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN departments d</span><br><span class="line">ON e.department_id = d.department_id</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line"></span><br><span class="line">SELECT *</span><br><span class="line">FROM job_grades;</span><br><span class="line"></span><br><span class="line">SELECT avg_dep.*,jg.grade_level</span><br><span class="line">FROM(</span><br><span class="line">				SELECT AVG(salary) avgs,department_name,e.department_id</span><br><span class="line">				FROM employees e</span><br><span class="line">				JOIN departments d</span><br><span class="line">				ON e.department_id = d.department_id</span><br><span class="line">				GROUP BY department_id</span><br><span class="line">)avg_dep</span><br><span class="line">JOIN job_grades jg</span><br><span class="line">ON avg_dep.avgs BETWEEN lowest_sal AND highest_sal;</span><br><span class="line"></span><br><span class="line">#查询有员工的部门名  用exist</span><br><span class="line"></span><br><span class="line">-- 方式一：使用join</span><br><span class="line">#注意点：注意：distinct关键字只能放在所有字段前面，不能在某个字段之后。</span><br><span class="line">SELECT DISTINCT d.department_id</span><br><span class="line">FROM departments d</span><br><span class="line"> JOIN employees e</span><br><span class="line">ON  e.department_id = d.department_id</span><br><span class="line">#WHERE e.department_id IS NULL</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE d.department_id = ANY(</span><br><span class="line">		SELECT DISTINCT d.department_id</span><br><span class="line">		FROM departments d</span><br><span class="line">		 JOIN employees e</span><br><span class="line">		ON  e.department_id = d.department_id</span><br><span class="line">		#WHERE e.department_id IS NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 方式二： 使用EXISTS</span><br><span class="line"></span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line"> WHERE EXISTS(</span><br><span class="line">			SELECT * </span><br><span class="line">			FROM employees e</span><br><span class="line">			WHERE d.department_id = e.department_id </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 方式三： 用IN</span><br><span class="line"></span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE d.department_id IN(</span><br><span class="line">		SELECT department_id</span><br><span class="line">		FROM employees e</span><br><span class="line">		WHERE e.department_id = d.department_id</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- ------------------------------------------------------------------------------------------------</span><br><span class="line">-- 习题</span><br><span class="line">#1.	查询和Zlotkey相同部门的员工姓名和工资</span><br><span class="line"></span><br><span class="line">SELECT last_name,salary</span><br><span class="line">FROM  employees e</span><br><span class="line">WHERE e.department_id =(</span><br><span class="line">	SELECT department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name = &#x27;Zlotkey&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="九：创建数据库和表"><a href="#九：创建数据库和表" class="headerlink" title="九：创建数据库和表"></a>九：创建数据库和表</h2><h4 id="1-创建数据库"><a href="#1-创建数据库" class="headerlink" title="1.创建数据库"></a>1.创建数据库</h4><pre><code> 创建一个保存员工信息的数据库
– create database employees;
 相关其他命令
– show databases;查看当前所有数据库
– use employees;“使用”一个数据库，使其作为当前数据库
删除数据库 
DROP DATABASE IF EXISTS 数据库名;
</code></pre>
<h4 id="2-创建表"><a href="#2-创建表" class="headerlink" title="2.创建表"></a>2.创建表</h4><pre><code>CREATE TABLE [schema.]table
(column datatype [DEFAULT expr][, ...]);
</code></pre>
<h4 id="3-使用子查询创建表"><a href="#3-使用子查询创建表" class="headerlink" title="3.使用子查询创建表"></a>3.使用子查询创建表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table emp1 as select * from employees;</span><br><span class="line">create table emp2 as select * from employees where 1=2;</span><br><span class="line">--创建的emp2是空表。</span><br></pre></td></tr></table></figure>
<h4 id="4-修改表"><a href="#4-修改表" class="headerlink" title="4.修改表"></a>4.修改表</h4><p>ALTER TABLE 语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ADD:</span><br><span class="line">ALTER TABLE dept80 </span><br><span class="line">ADD job_id varchar(15);</span><br><span class="line"></span><br><span class="line">MODIFY:</span><br><span class="line">ALTER TABLE dept80</span><br><span class="line">MODIFY (last_name VARCHAR(30));</span><br><span class="line"></span><br><span class="line">DROP:  </span><br><span class="line">ALTER TABLE dept80</span><br><span class="line">DROP COLUMN job_id;</span><br><span class="line"></span><br><span class="line">CHANGE重命名：</span><br><span class="line">ALTER TABLE dept80</span><br><span class="line">CHANGE department_name dept_name varchar(15); </span><br></pre></td></tr></table></figure>
<h4 id="5-删除表"><a href="#5-删除表" class="headerlink" title="5.删除表"></a>5.删除表</h4><pre><code>DROP TABLE dept80;
</code></pre>
<h4 id="6-清空表"><a href="#6-清空表" class="headerlink" title="6.清空表"></a>6.清空表</h4><pre><code>TRUNCATE TABLE detail_dept;
</code></pre>
<h2 id="十：常见约束与分页查询"><a href="#十：常见约束与分页查询" class="headerlink" title="十：常见约束与分页查询"></a>十：常见约束与分页查询</h2><h4 id="1-常见约束"><a href="#1-常见约束" class="headerlink" title="1.常见约束"></a>1.常见约束</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">    CREATE TABLE stuinfo(</span><br><span class="line">		id INT PRIMARY KEY, #主键</span><br><span class="line">		`NAME` VARCHAR(20) NOT NULL UNIQUE, #非空且唯一</span><br><span class="line">		gender CHAR(1) CHECK(gender=&#x27;男&#x27; OR gender=&#x27;女&#x27;), #检查</span><br><span class="line">		seat INT UNIQUE, #唯一</span><br><span class="line">		age INT DEFAULT 18, #默认</span><br><span class="line">		majorid INT REFERENCES major(id) #外键</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE major(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	majorName VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">		id INT,</span><br><span class="line">		stuName VARCHAR(20),</span><br><span class="line">		gender CHAR(1),</span><br><span class="line">		seat INT,</span><br><span class="line">		age INT,</span><br><span class="line">		majorid INT,</span><br><span class="line">		</span><br><span class="line">		CONSTRAINT PK PRIMARY KEY(id), #主键</span><br><span class="line">		CONSTRAINT up UNIQUE(seat), #唯一</span><br><span class="line">		CONSTRAINT ck CHECK(gender = &#x27;男&#x27; OR gender = &#x27;女&#x27;) #检查</span><br><span class="line">		</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">		位置		支持的约束类型			是否可以起约束名</span><br><span class="line">列级约束：	列的后面		语法都支持，但外键没有效果		不可以</span><br><span class="line">表级约束：	所有列的下面	默认和非空不支持，其他支持		可以（主键没有效果）</span><br><span class="line">*/</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-分页查询"><a href="#2-分页查询" class="headerlink" title="2.分页查询"></a>2.分页查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">     语法：</span><br><span class="line">        select 查询列表</span><br><span class="line">        from 表</span><br><span class="line">        【join type join 表2</span><br><span class="line">        on 连接条件</span><br><span class="line">        where 筛选条件</span><br><span class="line">        group by 分组字段</span><br><span class="line">        having 分组后的筛选</span><br><span class="line">        order by 排序的字段】</span><br><span class="line">        limit 【offset,】size;</span><br><span class="line">	offset要显示条目的起始索引（**起始索引从0开始）</span><br><span class="line">	size 要显示的条目个数</span><br><span class="line">	</span><br><span class="line">	*/</span><br><span class="line">	</span><br><span class="line">	SELECT *</span><br><span class="line">	FROM employees</span><br><span class="line">	LIMIT 0,5;</span><br><span class="line">	</span><br><span class="line">	#OR:</span><br><span class="line">	</span><br><span class="line">	SELECT * </span><br><span class="line">	FROM employees</span><br><span class="line">	LIMIT 5;</span><br><span class="line">	</span><br><span class="line">	#案例3：有奖金的员工信息，并且工资较高的前10名显示出来</span><br><span class="line">	SELECT *</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE commission_pct IS NOT NULL</span><br><span class="line">	ORDER BY salary DESC</span><br><span class="line">	LIMIT 10;</span><br></pre></td></tr></table></figure>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='false'
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
